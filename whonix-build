#!/bin/bash
# Whonix build menu script
# It updates, upgrades and runs git clone and checkout

#sudo apt-get update && sudo apt-get dist-upgrade -y

# Install git 1.8.5 (new git-c function)
#sudo apt-get -t wheezy-backports install git -y

echo "==============================================================================="
echo "What version of Whonix would you like to build?"
echo ""
echo "Latest stable release                                  --> Press 1 "
echo "Old stable, testers-only or developers-only releases   --> Press 2 "
echo "Exit the build menu                                    --> Press 0 "
echo ""
echo "Select by pressing the number and then ENTER"
echo "==============================================================================="
read answer1

case "$answer1" in 0 )
echo "Exiting the build menu"; exit
esac

case "$answer1" in 1 )
git clone https://github.com/Whonix/Whonix && git -C "/home/user/Whonix" checkout 8
esac

case "$answer1" in * )
echo "You have pressed an invalid key, please try again."
esac

case "$answer1" in 2 )
git clone https://github.com/adrelanos/nothing-to-see && git -C "/home/user/nothing-to-see" tag
echo "Type in what version do you want to build and press Enter"
esac
read answer

case "$answer1" in "answer" )
git -C "/home/user/nothing-to-see" checkout "$answer"
echo "============================================================================="
echo "What would you like to do?"
echo ""
echo "Build Whonix-Gateway virtual machine image         --> Press 1 "
echo "Build Whonix-Workstation virtual machine image     --> Press 2 "
echo "Build Whonix-Gateway on hardware                   --> Press 3 "
echo "Exit the build menu                                --> Press 0 "
echo ""
echo "Select by pressing the number and then ENTER"
echo "============================================================================"
read answer

case $answer in 1)
sudo ./Whonix/whonix_build --build --tor-gateway
esac

case $answer in 2)
sudo ./Whonix/whonix_build --build --tor-workstation
esac

case $answer in 3)
sudo ./Whonix/whonix_build --tor-gateway --bare-metal --build
esac

case $answer in 0)
exit & echo "Exiting the build menu"
esac

esac
